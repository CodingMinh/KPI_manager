{% extends 'base.html' %}
{% block content %}
  <h2>Pending Access Requests</h2>
  {% for req in requests %}
    <div class="request">
      <p><strong>{{ req.user.name }}</strong> ({{ req.user.email }})</p>
      <p>Reason: {{ req.reason }}</p>
      <p>Status: {{ req.status }}</p>
      {% if req.status == 'pending' %}
        <form method="POST" action="{{ url_for('auth.approve_access_request', request_id=req.id) }}">
          <button type="submit">Approve</button>
        </form>
        <form method="POST" action="{{ url_for('auth.deny_access_request', request_id=req.id) }}">
          <button type="submit">Deny</button>
        </form>
      {% else %}
        <p>Reviewed by {{ req.reviewer.name }} on {{ req.decision_timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</p>
      {% endif %}
    </div>
  {% endfor %}
{% endblock %}